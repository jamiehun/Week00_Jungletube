<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap
      contributors">
    <meta name="generator" content="Hugo 0.84.0">
    <link rel="shortcut icon" type="image/x-icon"
      href="https://cdn-icons-png.flaticon.com/512/1776/1776999.png">
    <title>정글튜브</title>

    <link rel="canonical"
      href="https://getbootstrap.com/docs/5.0/examples/album/">



    <!-- JS -->
    <script
      src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"
      integrity="sha512-aUhL2xOCrpLEuGD5f6tgHbLYEXRpYZ8G5yD+WlFrXrPy2IrWBlu6bih5C9H6qGsgqnU6mgx6KtU8TreHpASprw=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
      integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
      crossorigin="anonymous"></script>
    <!-- Bootstrap core CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous">
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"></script>
    <link rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <!-- 토스 폰트 -->
    <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css'
      rel='stylesheet' type='text/css'>

    <style>
    * {
      font-family: 'Spoqa Han Sans Neo', 'sans-serif';
    }

    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }

    a {
      text-decoration: none;
    }

    .signup {
      color: #87A2FB;
    }

    .login {
      color: white;
    }

    .logout {

      color: #CD104D;
    }

    .modal-v1 {
      margin: 10px;
    }

    .video-view {

      white-space: nowrap;
      overflow: auto;
    }

    .card-form {
      margin: 10px;
    }

    .cards {
      margin: 30px;
    }

    #category-list {
      padding: 10px;
    }
    .week-form  {
      padding: 1.5rem;
    }
  </style>
    <script>

      function error_handler(resp) {
        if (resp['error'] == undefined) {
          return
        } else {
          alert(resp['error'])
        }
      }

    $(document).ready(function () {
      if ($.cookie('access_token_cookie')) {
        $("#login").hide();
        $("#signup").hide();
        $("#upload").show();
        $("#logout").show();
      }
    });
    // 회원가입 클릭시
    function signup() {
      console.log("회원가입신청!")

      let userId = $("#floatingId").val()
      let userPwd = $("#floatingPassword").val()
      let userNick = $("#floatingNick").val()
      console.log(userId, userPwd)
      $.ajax({
        type: "POST",
        url: "/api/signin",
        data: { 'give_id': userId, 'give_pwd': userPwd, 'give_nick': userNick },
        success: function (response) { // 성공하면
          error_handler(response)

          if (response["result"] == "success") {
            alert("저장 완료!");
            
            window.location.reload()
          }
        }
      })
    }

    // 로그인 클릭시
    function checkLogin() {
      console.log("로그인 신청!")

      let checkUserId = $("#loginID").val()
      let checkUserPwd = $("#loginPassword").val()
      console.log(checkUserId, checkUserPwd)

      $.ajax({
        type: "POST",
        url: "/api/login",
        data: { 'give_id': checkUserId, 'give_pwd': checkUserPwd },
        success: function (response) { // 성공하면
          if (response["result"] == "success") {
            alert("로그인 성공!");
            $("#login").hide();
            $("#signup").hide();
            $("#upload").show();
            $("#logout").show();
          } else {
            alert(response['msg'])
          }
        }
      }
      )
    }

    // 로그아웃 섹션
    function logout() {
      $.ajax({
        type: "POST",
        url: "/api/logout",
        success: function (res) {
          if (res['result'] == 'success') {
            alert('로그아웃 되셨습니다!')
            $("#login").show();
            $("#signup").show();
            $("#upload").hide();
            $("#logout").hide();
          }
        }
      });
    }

    // 업로드 클릭시
    function uploadVideo() {
      console.log("업로드 신청!")
      let category = $("#category").val()
      // url 자르기
      let oriUrl = $("#floatingUrl").val()
      let oneUrl = oriUrl.split('/')
      let url = oneUrl[oneUrl.length - 1]
      // 유튜브 링크가 두가지가 있는데 watch가 포함된 경우 잘라주기
      if (url.includes('=')) {
        url = url.substring(8)
      }
      // 유튜브 링크에 시간초가 포함되어있을떄
      if (url[url.length - 1] = 's') {
        url = url.split('&')[0]
      }
       
      let comment = $("#floatingTextarea2").val()

      console.log(category, url, comment)

      try {
        $.ajax({
          type: "POST",
          url: "/api/upload",
          data: {
            'give_category': category,
            'give_url': url,
            'give_comment': comment
          },
          success: function (response) { // 성공하면
            if (response["result"] == "success") {
              alert("저장 완료!");
              window.location.reload()
            }
          }
        })
      } catch (err) {
        console.log('Nope!')
      }
    }

    // 동영상 모달 기능
    function videoModaladd(url) {
      console.log('썸네일 클릭할때 동영상 모달켜짐')
      console.log(url)
      let targetUrl = $(url).attr('id')
      console.log(targetUrl)
      let modalInVideo = `<iframe id="player" type="text/html" width="1100" height="600"
              src="http://www.youtube.com/embed/${targetUrl}?enablejsapi=1&origin=http://example.com"
              frameborder="0"></iframe>`
      $('#videoModalArea').append(modalInVideo)
    }
    // 동영상 모달 껐을때
    function videoModalExit() {
      console.log('동영상 모달 닫았을때')

      $('#videoModalArea').html("")
    }



    // 좋아요 기능
    function likeClick(url) {
      console.log('좋아요 클릭')

      let targetUrl = $(url).val()

      $.ajax({
        type: "POST",
        url: "/api/like",
        data: { 'give_url': targetUrl, },
        success: function (response) { // 성공하면
          if (response["result"] == "success") {
            alert("좋아요 완료 완료!");
            // 좋아요시 리로드 
            window.location.reload()
          }
        }
      })
    }
  </script>
  </head>

  <body>

    <header>

      <div class="navbar navbar-dark bg-dark shadow-sm">
        <div class="container">
          <a href="#" class="navbar-brand d-flex align-items-center">
            <img src="https://cdn-icons-png.flaticon.com/512/1776/1776999.png"
              style="width: 40px;" />
            <strong style="margin-left: 10px;">정글튜브</strong>
          </a>
        </div>

        <div style="margin:auto">

          <a href="#" id="signup" class=" align-items signup"
            data-bs-toggle="modal" data-bs-target="#signupModal">
            회원가입
          </a>
          <a href="#" id="login" class=" align-items login"
            data-bs-toggle="modal" data-bs-target="#loginModal">
            로그인
          </a>
          <a href="#" id="upload" class=" align-items signup"
            data-bs-toggle="modal" data-bs-target="#uploadModal"
            style="display: none;">
            글쓰기
          </a>
          <a href="#" id="logout" class=" align-items logout" onclick="logout()"
            style="display: none;">
            로그아웃
          </a>
        </div>

      </div>
    </header>

    <main>
      {% block title %}
      {% endblock %}
      <!-- 주차별 동영상 섹션-->

      <!-- <div class="album py-5 bg-light" id="category-list">
      <h2> Week 01 알고리즘</h2>
      <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">

        <div class="carousel-inner">
          <div class="carousel-item active">
            <div class="row cards">
              <div class="card col card-form" style="width: 18rem;">
                <img src="https://img.youtube.com/vi/YwC0m0XaD2E/mqdefault.jpg"
                  alt="유튜브 썸네일(https://img.youtube.com/vi/고유id/0.jpg)" class="" alt="..."
                  style="height: 150px; width:auto;">
                <div class="card-body">
                  <p class="card-text">첫번째 열 한줄 코멘트.</p>
                  <div class="d-flex justify-content-between align-items-center">
                    <a><i class="bi bi-fire"></i>3</a>
                    <button type="button" class="btn btn-link"><i class="bi bi-chat-heart"></i></button>
                  </div>
                </div>
              </div>

              <div class="card col card-form" style="width: 18rem;">
                <img src="https://img.youtube.com/vi/YwC0m0XaD2E/0.jpg" alt="유튜브 썸네일" class="" alt="..."
                  style="height: 150px; width:auto;">
                <div class="card-body">
                  <p class="card-text">한줄 코멘트.</p>
                  <div class="d-flex justify-content-between align-items-center">
                    <a><i class="bi bi-fire"></i>3</a>
                    <button type="button" class="btn btn-link"><i class="bi bi-chat-heart"></i></button>
                  </div>
                </div>
              </div> -->
      <!-- 더미카드-->
      <!-- <div class="card col card-form" style="width: 18rem;">
                <img src="https://i.ytimg.com/vi/yPku0DdMHIw/mqdefault.jpg" alt="유튜브 썸네일" class="" alt="..."
                  style="height: 150px; width:auto;">
                <div class="card-body">
                  <p class="card-text">영상이 없습니다. 여러분의 도움이 필요해요!</p>
                  <div class="d-flex justify-content-between align-items-center">
                    <i class="bi bi-emoji-frown"></i>
                  </div>
                </div>
              </div>

              <div class="card col card-form" style="width: 18rem;">
                <img src="https://img.youtube.com/vi/YwC0m0XaD2E/0.jpg" alt="유튜브 썸네일" class="" alt="..."
                  style="height: 150px; width:auto;">
                <div class="card-body">
                  <p class="card-text">한줄 코멘트.</p>
                  <div class="d-flex justify-content-between align-items-center">
                    <a><i class="bi bi-fire"></i>3</a>
                    <button type="button" class="btn btn-link"><i class="bi bi-chat-heart"></i></button>
                  </div>
                </div>
              </div>
            </div>
          </div> -->
      <!-- 두번째열 -->
      <!-- <div class="carousel-item">
            <div class="row cards">
              <div class="card col card-form" style="width: 18rem;">
                <img src="https://img.youtube.com/vi/YwC0m0XaD2E/0.jpg" alt="유튜브 썸네일" class="" alt="..."
                  style="height: 150px; width:auto;">
                <div class="card-body">
                  <p class="card-text">두번째열 한줄 코멘트.</p>
                  <div class="d-flex justify-content-between align-items-center">
                    <a><i class="bi bi-fire"></i>3</a>
                    <button type="button" class="btn btn-link"><i class="bi bi-chat-heart"></i></button>
                  </div>
                </div>
              </div>

              <div class="card col card-form" style="width: 18rem;">
                <img src="https://img.youtube.com/vi/YwC0m0XaD2E/0.jpg" alt="유튜브 썸네일" class="" alt="..."
                  style="height: 150px; width:auto;">
                <div class="card-body">
                  <p class="card-text">한줄 코멘트.</p>
                  <div class="d-flex justify-content-between align-items-center">
                    <a><i class="bi bi-fire"></i>3</a>
                    <button type="button" class="btn btn-link"><i class="bi bi-chat-heart"></i></button>
                  </div>
                </div>
              </div>

              <div class="card col card-form" style="width: 18rem;">
                <img src="https://img.youtube.com/vi/YwC0m0XaD2E/0.jpg" alt="유튜브 썸네일" class="" alt="..."
                  style="height: 150px; width:auto;">
                <div class="card-body">
                  <p class="card-text">한줄 코멘트.</p>
                  <div class="d-flex justify-content-between align-items-center">
                    <a><i class="bi bi-fire"></i>3</a>
                    <button type="button" class="btn btn-link"><i class="bi bi-chat-heart"></i></button>
                  </div>
                </div>
              </div>

              <div class="card col card-form" style="width: 18rem;">
                <img src="https://img.youtube.com/vi/YwC0m0XaD2E/0.jpg" alt="유튜브 썸네일" class="" alt="..."
                  style="height: 150px; width:auto;">
                <div class="card-body">
                  <p class="card-text">한줄 코멘트.</p>
                  <div class="d-flex justify-content-between align-items-center">
                    <a><i class="bi bi-fire"></i>3</a>
                    <button type="button" class="btn btn-link"><i class="bi bi-chat-heart"></i></button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div> -->
      <!-- 모달 섹션-->
      <!-- 회원가입 Modal 섹션-->
      <div class=" modal fade" id="signupModal" tabindex="-1"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <img src="https://cdn-icons-png.flaticon.com/512/1776/1776999.png"
                style="width: 40px;" />
              <h5 class="modal-title" id="exampleModalLabel">회원가입</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"
                aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="form-floating mb-3">
                <input type="id" class="form-control" id="floatingId"
                  placeholder="name@example.com">
                <label for="floatingId">아이디</label>
              </div>
              <div class="form-floating mb-3">
                <input type="password" class="form-control"
                  id="floatingPassword" placeholder="Password">
                <label for="floatingPassword">패스워드</label>
              </div>
              <div class="form-floating">
                <input type="text" class="form-control" id="floatingNick"
                  placeholder="별명">
                <label for="floatingNick">별명</label>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary"
                data-bs-dismiss="modal">닫기</button>
              <button type="button" class="btn btn-primary" onclick="signup()"
                data-bs-dismiss="modal">가입하기</button>
            </div>
          </div>
        </div>
      </div>


      <!-- 로그인 Modal -->
      <div class="modal fade" id="loginModal" tabindex="-1"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <img src="https://cdn-icons-png.flaticon.com/512/1776/1776999.png"
                style="width: 40px;" />
              <h5 class="modal-title" id="exampleModalLabel">로그인</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"
                aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="form-floating mb-3">
                <input type="email" class="form-control" id="loginID"
                  placeholder="name@example.com">
                <label for="floatingId">아이디</label>
              </div>
              <div class="form-floating">
                <input type="password" class="form-control" id="loginPassword"
                  placeholder="Password">
                <label for="floatingPassword">패스워드</label>
              </div>

            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary"
                data-bs-dismiss="modal">닫기</button>
              <button type="button" class="btn btn-info" data-bs-toggle="modal"
                data-bs-target="#signupModal">회원가입</button>
              <button type="button" class="btn btn-primary"
                data-bs-dismiss="modal" onclick="checkLogin()">로그인</button>
            </div>
          </div>
        </div>
      </div>

      <!-- 업로드 Modal -->
      <div class="modal fade" id="uploadModal" tabindex="-1"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <img src="https://cdn-icons-png.flaticon.com/512/1776/1776999.png"
                style="width: 40px;" />
              <h5 class="modal-title" id="exampleModalLabel">업로드</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"
                aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="wrap modal-v1">
                <div class="form-floating mb-3">
                  <select class="form-select" id="category" aria-label="Floating
                    label select example">
                    <option value="week3">week3</option>
                    <option value="week2">week2</option>
                    <option value="week1">week1</option>
                    <option value="week0">week0</option>
                  </select>
                  <label for="floatingSelect">카테고리 선택</label>
                </div>
                <div class="form-floating mb-3">
                  <input type="text" class="form-control" id="floatingUrl"
                    placeholder="link">
                  <label for="floatingUrl">링크</label>
                </div>
                <div class="form-floating">
                  <textarea class="form-control" placeholder="Leave a comment
                    here" id="floatingTextarea2" style="height: 100px"></textarea>
                  <label for="floatingTextarea2">코멘트</label>
                </div>


              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary"
                data-bs-dismiss="modal">닫기</button>
              <button type="button" class="btn btn-primary"
                data-bs-dismiss="modal" onclick="uploadVideo()">업로드</button>
            </div>
          </div>
        </div>
      </div>

      <!-- 동영상 Modal -->
      <div class="modal fade" id="videoModal" tabindex="-1"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
          <div class="modal-content">
            <div class="modal-header">
              <img src="https://cdn-icons-png.flaticon.com/512/1776/1776999.png"
                style="width: 40px;" />
              <h5 class="modal-title" id="exampleModalLabel">코멘트 넣어주면될듯d</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"
                aria-label="Close"
                onclick="videoModalExit()"></button>
            </div>
            <div class="modal-body" id="videoModalArea">
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary"
                data-bs-dismiss="modal"
                onclick="videoModalExit()">닫기</button>
            </div>
          </div>
        </div>
      </div>




    </main>

    <footer class="text-muted py-5">
      <div class="container">
        <p class="" style="text-align: center;">함께 정글에서 살아남자🔥 </p>
        <p class="float-end mb-1">
          <a href="#">위로</a>
        </p>
      </div>
      <div class="container">
        <p class="" style="text-align: center; margin-left: 1.5rem"> 7조 정성훈 김현진
          조성배😊</p>
      </div>

    </footer>

  </body>

</html>