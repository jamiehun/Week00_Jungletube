{% extends 'main_jinja2.html' %}

{% block title %}

<p>{{dict}}</p>
<hr>
<p>{{card_count}}</p>




<!-- "dict = dict, card_count = card_count" -->
<!-- {'week2': {'collectionCount': 1, 'dummyCount': 3, 'cardCount': 1}, -->

{% for key, value in dict.items() %}

<!-- 타이틀 부분 -->


<!-- if collection >= 2 -->
{% if card_count[key]['collectionCount'] >= 2 %}
<div style="border : 1px gray solid" class="album py-5 bg-light" id="category-list">

  <h1> {{ key }} </h1>
  {% set count_two = namespace(value=1) %}
  {% for temp in value %}

  <!-- 첫번째 카드에는 div coursel 넣어주기 -->
  {% if count_two.value == 1 %}
  <div id="{{key}}" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">

      <div class="carousel-item active">
        <div class="row cards">
          <div class="card col card-form" style="width: 18rem;">
            <img src="https://img.youtube.com/vi/{{ temp['url'] }}/mqdefault.jpg" alt="유튜브 썸네일" class="" alt="..."
              style="height: 150px; width:auto;">
            <div class="card-body">
              <p class="card-text">{{ temp['comment'] }}</p>
              <div class="d-flex justify-content-between align-items-center">
                <a><i class="bi bi-fire"></i>{{ temp['like'] }} </a>
                <button type="button" class="btn btn-link"><i class="bi bi-chat-heart"></i></button>
              </div>
            </div>
          </div>
          <!-- 첫번째 단에 4번째 카드 -->
          {% elif count_two.value//4 == 1 and count_two.value % 4 == 0 %}
          <div class="card col card-form" style="width: 18rem;">
            <img src="https://img.youtube.com/vi/{{ temp['url'] }}/mqdefault.jpg" alt="유튜브 썸네일" class="" alt="..."
              style="height: 150px; width:auto;">
            <div class="card-body">
              <p class="card-text">{{ temp['comment'] }}</p>
              <div class="d-flex justify-content-between align-items-center">
                <a><i class="bi bi-fire"></i>{{ temp['like'] }} </a>
                <button type="button" class="btn btn-link"><i class="bi bi-chat-heart"></i></button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 두번째단 이상인데 첫번째 카드일 때 -->
      {% elif count_two.value != 1 and count_two.value % 4 == 1 %}
      <div class="carousel-item">
        <div class="row cards">
          <div class="card col card-form" style="width: 18rem;">
            <img src="https://img.youtube.com/vi/{{ temp['url'] }}/mqdefault.jpg" alt="유튜브 썸네일" class="" alt="..."
              style="height: 150px; width:auto;">
            <div class="card-body">
              <p class="card-text">{{ temp['comment'] }}</p>
              <div class="d-flex justify-content-between align-items-center">
                <a><i class="bi bi-fire"></i>{{ temp['like'] }} </a>
                <button type="button" class="btn btn-link"><i class="bi bi-chat-heart"></i></button>
              </div>
            </div>
          </div>

          <!-- 두번째 단이상인데 마지막 카드 -->
          {% elif count_two.value//4 >= 2 and count_two.value % 4 == 0 %}
          <div class="card col card-form" style="width: 18rem;">
            <img src="https://img.youtube.com/vi/{{ temp['url'] }}/mqdefault.jpg" alt="유튜브 썸네일" class="" alt="..."
              style="height: 150px; width:auto;">
            <div class="card-body">
              <p class="card-text">{{ temp['comment'] }}</p>
              <div class="d-flex justify-content-between align-items-center">
                <a><i class="bi bi-fire"></i>{{ temp['like'] }} </a>
                <button type="button" class="btn btn-link"><i class="bi bi-chat-heart"></i></button>
              </div>
            </div>
          </div>
        </div>
      </div>


      <!-- 1번째, 4번째 카드가 아닌 다른 카드 -->
      {% else %}
      <div class="card col card-form" style="width: 18rem;">
        <img src="https://img.youtube.com/vi/{{ temp['url'] }}/mqdefault.jpg" alt="유튜브 썸네일" class="" alt="..."
          style="height: 150px; width:auto;">
        <div class="card-body">
          <p class="card-text">{{ temp['comment'] }}</p>
          <div class="d-flex justify-content-between align-items-center">
            <a><i class="bi bi-fire"></i>{{ temp['like'] }} </a>
            <button type="button" class="btn btn-link"><i class="bi bi-chat-heart"></i></button>
          </div>
        </div>
      </div>

      {% endif %}
      {% set count_two.value = count_two.value + 1 %}
      {% endfor %}

      <!-- 더미 값에 대한 div -->
      {% for i in range(card_count[key]['dummyCount']) %}
      <div class="card col card-form" style="width: 18rem;">
        <img src="https://i.ytimg.com/vi/yPku0DdMHIw/mqdefault.jpg" alt="유튜브 썸네일" class="" alt="..."
          style="height: 150px; width:auto;">
        <div class="card-body">
          <p class="card-text">영상이 없습니다. 여러분의 도움이 필요해요!</p>
          <div class="d-flex justify-content-between align-items-center">
            <i class="bi bi-emoji-frown"></i>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>


    <!-- 버튼 넣기 -->
    <div style="text-align:center;">
      <button class="btn btn-light" type="button" data-bs-target="#{{key}}" data-bs-slide="prev">
        <img src="https://cdn-icons-png.flaticon.com/512/467/467274.png" style="height: 20px;" />
      </button>
      <button class="btn btn-light" type="button" data-bs-target="#{{key}}" data-bs-slide="next">
        <img src="https://cdn-icons-png.flaticon.com/512/467/467282.png" style="height: 20px;" />
      </button>
    </div>
  </div>
</div>


<!-- if collection <= 1 -->
{% else %} <!-- 타이틀 부분 -->
  <div style='border : 1px grey solid' class="album py-5 bg-light" id="category-list2">

    <h1> {{ key }} </h1>
    <div class="row cards">

      <!-- 카드 갯수가 4개 이하이면 class에 action 없이 구현 -->
      <!-- 카드개수 : {{ card_count[key]['cardCount'] }} -->
      <!-- dummy 개수 : {{ card_count[key]['dummyCount'] }} -->
      <!-- <p>'{{ key }}'</p> -->
      <!-- <p>{{ card_count}}</p> -->
      <!-- <p>{{ card_count[key]['cardCount'] }}</p> -->


      {% set count_one = namespace(value=1) %}
      {% for temp in value %}

      <!-- 카드 섹션 -->
      <div class="card col card-form" style="width: 18rem;">
        <img src="https://img.youtube.com/vi/{{ temp['url'] }}/mqdefault.jpg " alt="유튜브 썸네일" class="" alt="..."
          style="height: 150px; width:auto;">
        <div class="card-body">
          <p class="card-text">{{ temp['comment'] }}</p>
          <div class="d-flex justify-content-between align-items-center">
            <a><i class="bi bi-fire"></i>{{ temp['like'] }} </a>
            <button type="button" class="btn btn-link"><i class="bi bi-chat-heart"></i></button>
          </div>
        </div>
      </div>
      {% set count_one.value = count_one.value + 1 %}
      {% endfor %}

      <!-- dummy 올리기 -->
      {% for i in range(card_count[key]['dummyCount']) %}
      <div class="card col card-form" style="width: 18rem;">
        <img src="https://i.ytimg.com/vi/yPku0DdMHIw/mqdefault.jpg" alt="유튜브 썸네일" class="" alt="..."
          style="height: 150px; width:auto;">
        <div class="card-body">
          <p class="card-text">영상이 없습니다. 여러분의 도움이 필요해요!</p>
          <div class="d-flex justify-content-between align-items-center">
            <i class="bi bi-emoji-frown"></i>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

  </div>
  {% endif %}


  <!--
    </div>
  </div>
</div>
-->

  {% endfor %}

  {% endblock %}